####################################################################################
#                   Include
####################################################################################
[include Macros.cfg]
[include mainsail.cfg]
[include Cartographer.cfg]
[include SHT36_PRO.cfg]
#[include Hotkey.cfg]
[include LED.cfg]
[include test_speed.cfg]

[exclude_object]

[mcu]
canbus_uuid: a064c5d8333e

[virtual_sdcard]
path: /home/rpi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[idle_timeout]
timeout: 1800

####################################################################################
#                   Voron 2.4 R2 350mm
####################################################################################
[printer]
kinematics: corexy                  
max_velocity: 600                  
max_accel: 14000			            
max_z_velocity: 20		     	    
max_z_accel: 500                     
square_corner_velocity: 10

####################################################################################
#                 [X/Y Stepper Settings]
####################################################################################
#   B --------- --- A
#   |              |
#   |------E-------|
#   |              |
#   |              |
#   |              |
####################################################################################
#                   X (B Motor)
####################################################################################
[stepper_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
rotation_distance: 40
microsteps: 32                      
full_steps_per_rotation:200          
position_min: 0                     
position_endstop: 350             
position_max: 350                   
homing_speed: 150                   
homing_retract_dist: 3              
homing_positive_dir: true 
#----------------------------------------------------------------------------------
[tmc2209 stepper_x]
uart_pin: PC4
interpolate: True
run_current: 0.8
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 0

####################################################################################
#                   Y (A Motor)
####################################################################################
[stepper_y]
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
rotation_distance: 40
microsteps: 32                       
full_steps_per_rotation:200        
endstop_pin: PG9  
position_min: 0                     
position_endstop: 350              
position_max: 353                   
homing_speed: 150                   
homing_retract_dist: 3               
homing_positive_dir: true 
#-----------------------------------------------------------------------------------
[tmc2209 stepper_y]
uart_pin: PD11
interpolate: True
run_current: 0.8
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 0
 
####################################################################################
#                      Z Stepper Settings
####################################################################################
# ----------------
# |Z1          Z2|
# |  ---------   |
# |  |       |   |
# |  |       |   |
# |  x--------   |
# |Z           Z3|
# ----------------
#
####################################################################################
#                   Z
#################################################################################### 
[stepper_z]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
rotation_distance: 40
gear_ratio: 80:16
microsteps: 32 
#----------------------------------------------------------------------------------
endstop_pin: probe:z_virtual_endstop   # use idm as virtual endstop        
position_max: 310                   
position_min: -100                    
homing_speed: 10                     
#second_homing_speed: 3              
homing_retract_dist: 0 # idm needs this to be set to 0               
#----------------------------------------------------------------------------------
[tmc2209 stepper_z]
uart_pin: PC6
interpolate: true
run_current: 0.8
hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

####################################################################################
#                   Z1
####################################################################################  
[stepper_z1]
step_pin: PG4
dir_pin: PC1
enable_pin: !PA2
rotation_distance: 40
gear_ratio: 80:16
microsteps: 32
#-----------------------------------------------------------------------------------
[tmc2209 stepper_z1]
uart_pin: PC7
interpolate: true
run_current: 0.8
hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

####################################################################################
#                   Z2
#################################################################################### 
[stepper_z2]
step_pin: PF9
dir_pin: !PF10
enable_pin: !PG2
rotation_distance: 40
gear_ratio: 80:16
microsteps: 32
#----------------------------------------------------------------------------------
[tmc2209 stepper_z2]
uart_pin: PF2
interpolate: true
run_current: 0.8
hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 0

####################################################################################
#                   Z3
#################################################################################### 
[stepper_z3]
step_pin: PC13
dir_pin: PF0
enable_pin: !PF1
rotation_distance: 40
gear_ratio: 80:16
microsteps: 32
#-----------------------------------------------------------------------------------
[tmc2209 stepper_z3]
uart_pin: PE4
interpolate: true
run_current: 0.8
hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 0

#####################################################################
# 	Bed Heater
#####################################################################
[heater_bed]
heater_pin: PA1
sensor_type: Generic 3950
sensor_pin: PF3
max_power: 0.6
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

#####################################################################
# 	Fan Control
#####################################################################
[heater_fan Nevermore_filter]
pin: PA8
max_power: 1.0                       
shutdown_speed: 0.0                 
kick_start_time: 5.0                
heater: heater_bed                  
heater_temp: 60                     
fan_speed: 1.0 
#--------------------------------------------------------------------------------
#[heater_fan hotend_fan]
##	Hotend Fan - CNC_FAN1
#pin: PE5
#max_power: 1.0                       
#shutdown_speed: 0.0                 
#kick_start_time: 5.0                
#heater: heater_bed                  
#heater_temp: 60                     
#fan_speed: 1.0 
#--------------------------------------------------------------------------------
[heater_fan controller_fan]
##	Controller fan - CNC_FAN2
pin: PD12
kick_start_time: 0.5
heater: heater_bed
heater_temp: 45.0
#--------------------------------------------------------------------------------
#[heater_fan exhaust_fan]
##	Exhaust fan - CNC_FAN3
#pin: PD13
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#heater: heater_bed
#heater_temp: 60
#fan_speed: 1.0

#####################################################################
# 	LED Control
#####################################################################
#[output_pin caselight]
# Chamber Lighting - HE1 Connector (Optional)
#pin: PA3
#pwm:true
#shutdown_value: 0
#value:1
#cycle_time: 0.01

####################################################################################
#            Pi MCU  Board Octopus v1.1
####################################################################################
[temperature_sensor Octopus]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 90
#-----------------------------------------------------------------------------------
[temperature_sensor Raspberry]
sensor_type: temperature_host
sensor_path:/sys/class/thermal/thermal_zone0/temp
min_temp: 0
max_temp: 90





#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [scanner model default]
#*# model_coef = 1.5753426513398077,
#*# 	1.9073215331282405,
#*# 	0.7592497692191289,
#*# 	0.3892735599574436,
#*# 	0.3712955882216718,
#*# 	0.18890144277997362,
#*# 	-0.29534123063333506,
#*# 	-0.16767480885529035,
#*# 	0.24147471972331028,
#*# 	0.13522102568211783
#*# model_domain = 3.200177432041166e-07,3.2974763683001955e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 37.820680
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 37.625
#*# pid_ki = 1.349
#*# pid_kd = 262.436
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 26.581
#*# pid_ki = 3.003
#*# pid_kd = 58.813
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 70.8
#*# shaper_type_y = mzv
#*# shaper_freq_y = 35.6
#*#
#*# [scanner]
#*# mode = touch
#*# scanner_touch_threshold = 1750
#*# scanner_touch_speed = 3
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.049933, -0.050416, -0.045385, -0.040318, -0.039609, -0.033324, -0.033474, -0.030547, -0.026338, -0.022692, -0.022359, -0.021681, -0.020679, -0.017465, -0.017282, -0.021259, -0.022308, -0.018341, -0.011704, -0.014460, -0.015745, -0.018668, -0.016100, -0.020405, -0.022051, -0.026674, -0.027135, -0.034457, -0.033766, -0.033827
#*# 	  -0.040322, -0.040401, -0.034711, -0.031402, -0.027616, -0.025986, -0.023381, -0.020554, -0.015058, -0.011987, -0.010403, -0.010280, -0.006165, -0.006164, -0.003743, -0.005110, -0.003905, -0.002294, -0.002079, -0.000259, -0.000302, -0.001875, -0.004872, -0.006212, -0.007118, -0.009668, -0.014368, -0.018336, -0.019429, -0.019574
#*# 	  -0.032779, -0.028726, -0.025423, -0.021730, -0.017777, -0.014076, -0.012776, -0.011598, -0.007012, -0.003521, -0.000985, -0.001834, 0.002313, 0.001764, 0.004730, 0.007892, 0.012089, 0.009819, 0.010751, 0.006765, 0.010105, 0.006788, 0.003990, -0.001458, 0.002025, 0.000318, -0.003079, -0.009908, -0.008147, -0.008708
#*# 	  -0.026095, -0.024879, -0.021652, -0.018778, -0.010495, -0.005911, -0.006046, -0.007583, 0.000316, 0.003306, 0.004238, 0.002586, 0.008574, 0.009993, 0.013896, 0.014863, 0.016796, 0.017237, 0.021373, 0.018780, 0.016358, 0.012985, 0.016350, 0.011277, 0.011039, 0.009906, 0.006686, 0.003233, 0.001904, -0.004176
#*# 	  -0.026023, -0.024988, -0.016040, -0.015816, -0.009525, -0.005540, -0.002784, -0.002761, 0.002606, 0.006555, 0.010828, 0.008835, 0.010799, 0.009149, 0.016620, 0.017476, 0.021141, 0.016446, 0.021261, 0.021505, 0.018846, 0.013809, 0.014111, 0.014116, 0.013324, 0.011823, 0.010094, 0.007084, 0.004665, 0.003641
#*# 	  -0.029863, -0.026586, -0.022061, -0.016382, -0.010645, -0.007078, -0.006786, -0.004060, 0.001032, 0.005811, 0.007343, 0.008201, 0.009730, 0.008664, 0.014084, 0.016150, 0.017512, 0.016760, 0.020231, 0.021974, 0.019076, 0.012351, 0.013731, 0.014160, 0.015111, 0.010275, 0.008874, 0.004614, 0.006832, 0.001530
#*# 	  -0.028121, -0.023936, -0.018268, -0.014941, -0.006271, -0.005088, -0.004087, -0.003203, 0.004781, 0.008927, 0.011095, 0.010535, 0.012599, 0.014836, 0.016881, 0.019409, 0.020483, 0.021162, 0.023043, 0.023944, 0.021760, 0.019264, 0.017133, 0.018220, 0.017328, 0.018376, 0.012765, 0.010754, 0.010525, 0.008688
#*# 	  -0.026059, -0.020355, -0.017094, -0.011899, -0.006170, 0.002407, -0.000711, 0.001651, 0.007169, 0.011132, 0.013226, 0.015296, 0.016780, 0.018225, 0.020500, 0.022545, 0.025519, 0.026096, 0.026526, 0.025566, 0.027738, 0.025289, 0.022872, 0.019050, 0.022590, 0.020976, 0.018489, 0.012041, 0.014599, 0.019087
#*# 	  -0.025758, -0.025375, -0.016948, -0.013323, -0.006977, -0.004978, -0.001296, 0.001577, 0.006832, 0.011503, 0.013363, 0.014985, 0.016400, 0.018686, 0.020534, 0.022063, 0.024658, 0.025653, 0.026210, 0.031212, 0.027111, 0.026552, 0.025041, 0.027309, 0.023422, 0.022905, 0.021468, 0.023796, 0.017878, 0.012101
#*# 	  -0.034070, -0.028999, -0.024388, -0.021542, -0.017433, -0.010413, -0.008414, -0.005121, -0.002435, 0.002769, 0.004272, 0.006421, 0.006286, 0.009094, 0.010358, 0.014628, 0.015945, 0.017054, 0.017815, 0.019108, 0.019760, 0.019136, 0.017768, 0.016968, 0.015332, 0.014498, 0.013230, 0.011175, 0.009428, 0.006891
#*# 	  -0.034653, -0.030186, -0.026411, -0.023053, -0.018465, -0.013454, -0.011017, -0.007620, -0.002960, 0.001162, 0.003465, 0.003644, 0.005109, 0.011542, 0.007974, 0.011511, 0.014129, 0.019829, 0.017433, 0.019755, 0.020948, 0.018689, 0.017382, 0.016304, 0.010401, 0.013912, 0.011337, 0.010323, 0.005376, 0.008074
#*# 	  -0.037578, -0.033999, -0.030584, -0.025639, -0.019434, -0.014692, -0.016261, -0.009999, -0.004790, -0.000425, -0.001030, 0.001021, 0.001504, 0.006951, 0.004847, 0.007981, 0.011578, 0.018590, 0.015538, 0.018241, 0.018902, 0.019956, 0.014138, 0.013633, 0.012718, 0.011842, 0.010577, 0.009272, 0.008797, 0.006693
#*# 	  -0.040226, -0.035362, -0.031248, -0.024653, -0.022266, -0.015454, -0.012483, -0.004637, -0.004287, 0.000577, 0.001652, 0.003636, 0.002047, 0.003410, 0.001975, 0.007705, 0.011079, 0.013683, 0.014474, 0.018953, 0.015669, 0.013354, 0.008524, 0.010613, 0.010206, 0.010845, 0.010337, 0.009095, 0.009266, 0.009740
#*# 	  -0.043230, -0.038026, -0.033038, -0.029545, -0.023165, -0.016953, -0.015318, -0.010998, -0.007098, -0.002991, -0.001403, -0.002412, -0.004454, 0.000952, 0.003236, 0.005849, 0.004409, 0.010838, 0.012427, 0.012830, 0.007744, 0.009196, 0.008167, 0.012364, 0.008371, 0.008666, 0.006622, 0.011404, 0.005900, 0.002978
#*# 	  -0.046998, -0.040310, -0.038651, -0.034717, -0.027582, -0.021530, -0.017979, -0.015003, -0.015189, -0.006194, -0.004222, -0.004123, -0.005238, -0.003015, -0.002227, 0.000700, 0.004852, 0.005241, 0.006729, 0.006976, 0.006633, 0.004594, 0.003561, 0.005589, 0.004826, 0.003673, 0.005301, 0.003476, 0.004625, 0.002061
#*# 	  -0.049654, -0.045665, -0.042147, -0.038840, -0.032157, -0.027685, -0.024396, -0.020380, -0.015412, -0.009500, -0.008346, -0.007856, -0.006629, -0.006734, -0.007740, -0.004755, 0.000039, 0.000608, -0.000421, 0.002405, 0.002989, 0.002229, -0.001311, 0.003150, 0.003724, 0.000471, -0.002090, -0.000381, 0.000494, -0.002372
#*# 	  -0.053025, -0.048142, -0.048044, -0.042365, -0.036810, -0.030863, -0.029638, -0.025121, -0.019594, -0.014372, -0.013657, -0.012234, -0.012623, -0.011638, -0.009927, -0.008070, -0.005373, -0.005204, -0.005627, -0.004997, -0.001795, -0.003517, -0.003708, -0.003826, -0.003027, -0.006885, -0.007427, -0.005955, -0.002558, -0.007170
#*# 	  -0.059964, -0.052567, -0.050026, -0.047266, -0.041256, -0.034473, -0.029386, -0.030299, -0.024204, -0.020357, -0.016902, -0.018582, -0.017355, -0.017694, -0.013753, -0.011897, -0.009453, -0.010437, -0.009758, -0.009300, -0.008550, -0.008070, -0.006904, -0.008366, -0.008944, -0.010316, -0.010972, -0.010804, -0.012102, -0.013980
#*# 	  -0.064838, -0.059723, -0.058460, -0.053937, -0.048132, -0.042938, -0.041046, -0.038523, -0.032315, -0.028418, -0.024816, -0.025208, -0.024851, -0.024688, -0.018548, -0.018702, -0.018046, -0.018790, -0.016664, -0.016570, -0.015418, -0.017429, -0.015671, -0.015896, -0.016285, -0.017974, -0.019024, -0.017526, -0.016970, -0.019996
#*# 	  -0.067329, -0.062674, -0.060467, -0.055875, -0.050795, -0.047800, -0.045391, -0.041455, -0.036680, -0.033865, -0.030226, -0.029754, -0.028798, -0.028472, -0.027233, -0.023665, -0.020843, -0.022031, -0.022048, -0.021662, -0.018461, -0.022313, -0.021494, -0.019112, -0.020510, -0.021442, -0.022548, -0.021758, -0.020723, -0.022815
#*# 	  -0.067918, -0.062036, -0.061982, -0.059355, -0.049018, -0.047089, -0.045439, -0.041968, -0.033354, -0.032541, -0.028044, -0.028547, -0.027737, -0.028973, -0.028573, -0.028332, -0.024619, -0.023919, -0.024559, -0.024962, -0.023215, -0.023450, -0.022605, -0.020539, -0.022626, -0.022315, -0.024013, -0.023714, -0.022749, -0.023120
#*# 	  -0.068230, -0.063753, -0.061809, -0.058393, -0.054232, -0.048204, -0.045276, -0.042588, -0.036265, -0.031275, -0.029322, -0.030362, -0.028663, -0.029095, -0.029690, -0.027931, -0.024556, -0.024441, -0.025339, -0.026090, -0.024349, -0.023728, -0.022333, -0.024364, -0.024812, -0.025985, -0.025432, -0.028206, -0.027767, -0.026998
#*# 	  -0.071334, -0.066615, -0.065337, -0.063123, -0.058821, -0.054704, -0.051124, -0.047861, -0.042143, -0.038681, -0.033683, -0.033907, -0.034410, -0.036638, -0.035423, -0.033784, -0.031039, -0.032415, -0.033035, -0.031744, -0.031719, -0.031574, -0.030696, -0.030442, -0.031335, -0.033338, -0.034619, -0.031954, -0.033357, -0.034263
#*# 	  -0.073375, -0.069271, -0.066443, -0.064218, -0.061382, -0.055769, -0.052571, -0.048110, -0.042679, -0.038533, -0.035948, -0.036287, -0.037432, -0.037903, -0.038438, -0.036373, -0.035366, -0.036600, -0.036591, -0.035089, -0.034734, -0.034667, -0.033315, -0.032749, -0.033637, -0.036654, -0.037767, -0.038213, -0.036865, -0.039538
#*# 	  -0.074695, -0.071349, -0.069684, -0.070239, -0.064161, -0.061741, -0.058185, -0.056093, -0.049487, -0.044510, -0.041863, -0.042886, -0.044713, -0.044694, -0.044185, -0.044023, -0.041772, -0.042174, -0.043307, -0.041857, -0.042133, -0.042368, -0.043387, -0.043737, -0.045053, -0.047096, -0.048525, -0.049025, -0.046666, -0.048404
#*# 	  -0.076953, -0.074699, -0.074119, -0.070755, -0.068074, -0.064962, -0.062312, -0.060123, -0.054319, -0.051233, -0.049321, -0.049666, -0.050863, -0.051018, -0.050817, -0.050527, -0.047742, -0.048491, -0.049882, -0.049446, -0.050370, -0.050923, -0.051709, -0.051356, -0.052223, -0.054856, -0.055955, -0.056508, -0.055208, -0.056639
#*# 	  -0.075603, -0.073798, -0.074264, -0.071567, -0.067180, -0.062805, -0.061785, -0.060196, -0.056050, -0.052611, -0.049965, -0.050642, -0.051263, -0.051391, -0.050984, -0.048902, -0.048330, -0.049638, -0.050609, -0.050407, -0.051787, -0.053079, -0.053572, -0.053831, -0.056102, -0.056917, -0.056750, -0.056608, -0.056936, -0.058919
#*# 	  -0.073880, -0.072389, -0.071621, -0.071654, -0.068339, -0.064620, -0.063450, -0.062955, -0.060458, -0.055498, -0.052935, -0.052458, -0.055757, -0.054127, -0.053216, -0.052896, -0.051543, -0.050910, -0.051595, -0.051523, -0.054699, -0.056557, -0.056089, -0.055506, -0.057744, -0.059831, -0.061459, -0.059679, -0.059788, -0.060881
#*# 	  -0.070462, -0.068981, -0.070922, -0.068746, -0.066311, -0.063918, -0.064393, -0.061574, -0.059527, -0.055854, -0.054438, -0.053332, -0.053542, -0.053706, -0.053673, -0.053621, -0.052366, -0.051354, -0.052496, -0.053143, -0.055540, -0.056966, -0.057687, -0.057183, -0.059233, -0.060264, -0.062649, -0.061733, -0.060293, -0.061630
#*# 	  -0.064393, -0.067504, -0.069225, -0.068606, -0.065472, -0.063895, -0.063818, -0.062878, -0.060091, -0.057578, -0.054633, -0.054426, -0.054336, -0.057343, -0.057753, -0.056352, -0.052042, -0.052162, -0.054975, -0.054970, -0.057228, -0.057634, -0.057789, -0.058499, -0.059979, -0.061899, -0.063461, -0.063659, -0.061778, -0.061907
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 310.0
#*# min_y = 40.0
#*# max_y = 310.0
