[include shell_command.cfg]
[virtual_sdcard]
path: ~/printer_data/gcodes
[display_status]
[pause_resume]

[mcu]
serial:/dev/serial/by-id/usb-Klipper_stm32f446xx_61003F001451303530323539-if00

[printer]                           
kinematics: corexy                  
max_velocity: 700                   
max_accel: 15000			            
max_z_velocity: 20		     	    
max_z_accel: 500                     
square_corner_velocity: 10

[idle_timeout]
timeout: 1800
####################################################################################
#                   Voron 2.4 R2 350mm
####################################################################################

[exclude_object]
[gcode_arcs]
resolution: 0.1
[include macros.cfg]
[include LED.cfg]
[include SHT36_PRO.cfg]
[include test_speed.cfg]
[include mainsail.cfg]
[include Hotkey.cfg]
[include Cartographer.cfg]
####################################################################################
#                 [X/Y Stepper Settings]
####################################################################################
#   B --------- --- A
#   |              |
#   |------E-------|
#   |              |
#   |              |
#   |              |
####################################################################################
#                   X (B Motor)
####################################################################################
[stepper_x]                         
step_pin: PE11                      
dir_pin: PE10                       
enable_pin: !PE9                    
rotation_distance: 40                
microsteps: 32                      
full_steps_per_rotation:200          
position_min: 0                     
position_endstop: 350              
position_max: 350                    
homing_speed: 150                   
homing_retract_dist: 2              
homing_positive_dir: true           
#----------------------------------------------------------------------------------
[tmc2209 stepper_x]                 
uart_pin: PE7 
interpolate: true                   
run_current: 0.9                                      
sense_resistor: 0.110                
stealthchop_threshold:  0 
[autotune_tmc stepper_x]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Y (A Motor)
####################################################################################
[stepper_y]                         
step_pin: PD8                       
dir_pin: PB12                       
enable_pin: !PD9                    
rotation_distance: 40               
microsteps: 32                       
full_steps_per_rotation:200        
endstop_pin: ^PB13 
position_min: 0                     
position_endstop: 350              
position_max: 350                   
homing_speed: 150                   
homing_retract_dist: 2               
homing_positive_dir: true           
#-----------------------------------------------------------------------------------
[tmc2209 stepper_y]                 
uart_pin: PE15 
interpolate: true                
run_current: 0.9                                       
sense_resistor: 0.110                
stealthchop_threshold: 0           
[autotune_tmc stepper_y]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                      Z Stepper Settings
####################################################################################
# ----------------
# |Z1          Z2|
# |  ---------   |
# |  |       |   |
# |  |       |   |
# |  x--------   |
# |Z           Z3|
# ----------------
#
####################################################################################
#                   Z
#################################################################################### 
[stepper_z]                         
step_pin: PD14                      
dir_pin: PD13                       
enable_pin: !PD15                   
rotation_distance: 40               
gear_ratio: 80:16                   
microsteps: 32 
#----------------------------------------------------------------------------------
endstop_pin: probe:z_virtual_endstop   # use idm as virtual endstop        
position_max: 310                   
position_min: -10                    
homing_speed: 10                     
#second_homing_speed: 3              
homing_retract_dist: 0 # idm needs this to be set to 0               
#----------------------------------------------------------------------------------
[tmc2209 stepper_z]                 
uart_pin: PD10                      
interpolate: true                
run_current: 0.8                                      
sense_resistor: 0.110                
stealthchop_threshold: 0 
[autotune_tmc stepper_z]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Z1
####################################################################################  
[stepper_z1]                        
step_pin: PE6                       
dir_pin: !PC13                       
enable_pin: !PE5                    
rotation_distance: 40               
gear_ratio: 80:16                   
microsteps: 32                     
#-----------------------------------------------------------------------------------
[tmc2209 stepper_z1]                
uart_pin: PC14                       
interpolate: true               
run_current: 0.8                                       
sense_resistor: 0.110                
stealthchop_threshold: 0
[autotune_tmc stepper_z1]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Z2
#################################################################################### 
[stepper_z2]                       
step_pin: PE2                        
dir_pin: PE4                        
enable_pin: !PE3                    
rotation_distance: 40                
gear_ratio: 80:16                    
microsteps: 32                       
#----------------------------------------------------------------------------------
[tmc2209 stepper_z2]                
uart_pin: PC15                      
interpolate: true                  
run_current: 0.8                                        
sense_resistor: 0.110                
stealthchop_threshold: 0
[autotune_tmc stepper_z2]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Z3
#################################################################################### 
[stepper_z3]                       
step_pin: PD12                       
dir_pin: !PC4                        
enable_pin: !PE8                     
rotation_distance: 40                
gear_ratio: 80:16                    
microsteps: 32                       
#-----------------------------------------------------------------------------------
[tmc2209 stepper_z3]                
uart_pin: PA15                      
interpolate: true                 
run_current: 0.8                                      
sense_resistor: 0.110                
stealthchop_threshold: 0  
[autotune_tmc stepper_z3]
motor: omc-17hm19-2004s
tuning_goal: performance

####################################################################################
#                   Bed Heater
####################################################################################
[heater_bed]
heater_pin: PB4                     
sensor_type: Generic 3950           
sensor_pin: PB0                      
max_power: 0.6                     
min_temp: 0                       
max_temp: 120                      
#control: pid                       
#pid_kp: 58.437                     
#pid_ki: 2.347                      
#pid_kd: 363.769                    

####################################################################################
#	             Fan Control
####################################################################################
[heater_fan Controller_fan]         
pin: PC8                             
fan_speed: 0.35                      
kick_start_time: 0.5                
heater: extruder           
heater_temp: 40 
#--------------------------------------------------------------------------------
[heater_fan Nevermore_filter]
pin: PB3                            
max_power: 1.0                       
shutdown_speed: 0.0                 
kick_start_time: 5.0                
heater: heater_bed                  
heater_temp: 60                     
fan_speed: 1.0                      

####################################################################################
#	                LED Control
####################################################################################
[output_pin caselight]              
pin:PB6
pwm: true
shutdown_value: 0
cycle_time: 0.01
value: 1   

####################################################################################
#            Pi MCU  Board Spider v2.3
####################################################################################
[temperature_sensor Spider]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 90
#-----------------------------------------------------------------------------------
[temperature_sensor Raspberry]
sensor_type: temperature_host
sensor_path:/sys/class/thermal/thermal_zone0/temp
min_temp: 0
max_temp: 90


[gcode_macro SHUTDOWN]
gcode:
    #LCDRGB R=0 G=0 B=0                               ; Turn off LCD neopixels (see above for this macro)
    OFF                                              ; Shortcut to turn everything off (see above for this macro)
	{action_call_remote_method("shutdown_machine")}   ; Moonraker compatible host shutdown



    


   
## 	Thermistor Types
##   "EPCOS 100K B57560G104F"
##   "ATC Semitec 104GT-2"
##   "NTC 100K beta 3950"
##   "Honeywell 100K 135-104LAG-J01"
##   "NTC 100K MGB18-104F39050L32" (Keenovo Heater Pad)
##   "AD595"
##   "PT100 INA826"

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 32.887
#*# pid_ki = 1.059
#*# pid_kd = 255.287
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.614
#*# pid_ki = 2.339
#*# pid_kd = 70.121
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 75.6
#*# shaper_type_y = mzv
#*# shaper_freq_y = 44.2
#*#
#*# [scanner model default]
#*# model_coef = 1.6130900245592077,
#*# 	  1.9556204417981589,
#*# 	  0.7572792347972446,
#*# 	  0.27491923593355433,
#*# 	  0.32858231873087573,
#*# 	  0.47399036947182627,
#*# 	  -0.2921447716137872,
#*# 	  -0.5594672596939576,
#*# 	  0.24446229839985148,
#*# 	  0.30751628247403034
#*# model_domain = 3.2266259713556784e-07,3.302094819704433e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 53.107588
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.075984, -0.075466, -0.071520, -0.069706, -0.068635, -0.057671, -0.065991, -0.064371, -0.061873, -0.055925, -0.054731, -0.054561, -0.050401, -0.047747, -0.044824, -0.046645, -0.046677, -0.041906, -0.035705, -0.033064, -0.029842, -0.032473, -0.032007, -0.031961, -0.035483, -0.032397, -0.048433, -0.051971, -0.058625, -0.067470
#*# 	  -0.061754, -0.059905, -0.058451, -0.058084, -0.057224, -0.044885, -0.055363, -0.051520, -0.047965, -0.043088, -0.041596, -0.041362, -0.038523, -0.035137, -0.032525, -0.030634, -0.027519, -0.024848, -0.022222, -0.018505, -0.018103, -0.018146, -0.019770, -0.021804, -0.023084, -0.017127, -0.035345, -0.039871, -0.045381, -0.048204
#*# 	  -0.052882, -0.052543, -0.048859, -0.041558, -0.047400, -0.043181, -0.042307, -0.042632, -0.037809, -0.034383, -0.032627, -0.031638, -0.030606, -0.026076, -0.021352, -0.019590, -0.016630, -0.012801, -0.011101, -0.010407, -0.009067, -0.009792, -0.009723, -0.006248, -0.016325, -0.019710, -0.025296, -0.030925, -0.035413, -0.039949
#*# 	  -0.049789, -0.047124, -0.044311, -0.043196, -0.040385, -0.037020, -0.036922, -0.029224, -0.031749, -0.028178, -0.026637, -0.026482, -0.023262, -0.020082, -0.015538, -0.012408, -0.010274, -0.008480, -0.005510, -0.003836, -0.004278, -0.006044, -0.006702, -0.009310, -0.012859, -0.015777, -0.022022, -0.016849, -0.030266, -0.032437
#*# 	  -0.045614, -0.037516, -0.040986, -0.038462, -0.036423, -0.032759, -0.032128, -0.032691, -0.026712, -0.021516, -0.020046, -0.019597, -0.018937, -0.013721, -0.009968, -0.008244, -0.004219, -0.012846, -0.002253, -0.000033, 0.000132, 0.004947, -0.004765, -0.007450, -0.009681, -0.011457, -0.017284, -0.020607, -0.026274, -0.028649
#*# 	  -0.041186, -0.037407, -0.034343, -0.033025, -0.027552, -0.025817, -0.027665, -0.025373, -0.019305, -0.010459, -0.012398, -0.013986, -0.011019, -0.014581, -0.004220, -0.002379, 0.001320, 0.003091, 0.003120, 0.004403, 0.005175, 0.002477, -0.001188, -0.002265, -0.002473, -0.005492, -0.013716, -0.015952, -0.021597, -0.024744
#*# 	  -0.033508, -0.030357, -0.024836, -0.023434, -0.020744, -0.018868, -0.018038, -0.017353, -0.011088, -0.007804, -0.007033, -0.004755, -0.004316, -0.001450, 0.003276, -0.002269, 0.007016, 0.008277, 0.009555, 0.011798, 0.010726, 0.008635, 0.007479, 0.005032, 0.002545, -0.000578, -0.004350, -0.007972, -0.015092, -0.016627
#*# 	  -0.030689, -0.026319, -0.021535, -0.021015, -0.017181, -0.014296, -0.014711, -0.013422, -0.007982, -0.005995, -0.002822, -0.001565, 0.001537, 0.002395, 0.004099, 0.000819, 0.010317, 0.011264, 0.011625, 0.012574, 0.012604, 0.011466, 0.008960, 0.007121, 0.004049, 0.002597, -0.003634, -0.005498, -0.010847, -0.015887
#*# 	  -0.030298, -0.026841, -0.024177, -0.022618, -0.019487, -0.016806, -0.015421, -0.013202, -0.009789, -0.007101, -0.006335, -0.004884, -0.002776, -0.007074, 0.000570, 0.001780, 0.005738, 0.008303, 0.007314, 0.007617, 0.008600, 0.007319, 0.005732, 0.001739, 0.000444, -0.002430, -0.005588, -0.009284, -0.014802, -0.017778
#*# 	  -0.029629, -0.025096, -0.021242, -0.021198, -0.017404, -0.015192, -0.014662, -0.012859, -0.008860, -0.006425, -0.006458, -0.006650, -0.006079, -0.002111, 0.000763, 0.001568, 0.004356, 0.001115, 0.006445, 0.008137, 0.007097, 0.005607, 0.003873, 0.001423, -0.001240, -0.003673, -0.008344, -0.010915, -0.016813, -0.018342
#*# 	  -0.027901, -0.025556, -0.022589, -0.021743, -0.018413, -0.014638, -0.012953, -0.011324, -0.009252, -0.005992, -0.005447, -0.012396, -0.005340, -0.002062, -0.000325, 0.000559, 0.003710, 0.006727, 0.006264, 0.006963, 0.006298, 0.004464, 0.002659, -0.000867, -0.002059, -0.004303, -0.009206, -0.012639, -0.016697, -0.018957
#*# 	  -0.032109, -0.027296, -0.024443, -0.023634, -0.020338, -0.016556, -0.013948, -0.012669, -0.009506, -0.006327, -0.004901, -0.005574, -0.006269, -0.003779, -0.001321, -0.000708, 0.003413, 0.005337, 0.005391, 0.000657, 0.004703, 0.002473, -0.000079, -0.002836, -0.005122, -0.007784, -0.012612, -0.013437, -0.017919, -0.019670
#*# 	  -0.037240, -0.032563, -0.028695, -0.027363, -0.025258, -0.020175, -0.017773, -0.016135, -0.011970, -0.016774, -0.009821, -0.009840, -0.010129, -0.009064, -0.005819, -0.004682, 0.004183, -0.001089, -0.000627, -0.000596, -0.002546, -0.005413, -0.004580, -0.008548, -0.011710, -0.012974, -0.014417, -0.017658, -0.019543, -0.023024
#*# 	  -0.039636, -0.036189, -0.030592, -0.031343, -0.026729, -0.022838, -0.020444, -0.017882, -0.016212, -0.012614, -0.012249, -0.013984, -0.013106, -0.011073, -0.006351, -0.008241, -0.006314, -0.004414, -0.003115, -0.003843, -0.005216, -0.008834, -0.011108, -0.012468, -0.014554, -0.015961, -0.018000, -0.020264, -0.023353, -0.025815
#*# 	  -0.041857, -0.033236, -0.029720, -0.030254, -0.026267, -0.021902, -0.019773, -0.017965, -0.015131, -0.012845, -0.010860, -0.012208, -0.012254, -0.010816, -0.004591, -0.009176, -0.007446, -0.006918, -0.007702, -0.007529, -0.007635, -0.010396, -0.012760, -0.013772, -0.016810, -0.017196, -0.021360, -0.027265, -0.023796, -0.024926
#*# 	  -0.040957, -0.035842, -0.033088, -0.033971, -0.030694, -0.025947, -0.023532, -0.024000, -0.019228, -0.015320, -0.014163, -0.015575, -0.016114, -0.014513, -0.012810, -0.011631, -0.006586, -0.009776, -0.010831, -0.010469, -0.011920, -0.011536, -0.013005, -0.014598, -0.018257, -0.021395, -0.024433, -0.022989, -0.026625, -0.027713
#*# 	  -0.041659, -0.036930, -0.035219, -0.035879, -0.032181, -0.028707, -0.026035, -0.025434, -0.021632, -0.018738, -0.015853, -0.017098, -0.011531, -0.015872, -0.014593, -0.012893, -0.012170, -0.012996, -0.013246, -0.012364, -0.013616, -0.015612, -0.016472, -0.017959, -0.021929, -0.024956, -0.029318, -0.027379, -0.029583, -0.033021
#*# 	  -0.046009, -0.040853, -0.038409, -0.038856, -0.035166, -0.032650, -0.029494, -0.028974, -0.025661, -0.022766, -0.019413, -0.019987, -0.019657, -0.021172, -0.019689, -0.017159, -0.015963, -0.015406, -0.013626, -0.015482, -0.017404, -0.018870, -0.019813, -0.021688, -0.024651, -0.028517, -0.033156, -0.032155, -0.034559, -0.037039
#*# 	  -0.048769, -0.043916, -0.041554, -0.042948, -0.038731, -0.033449, -0.033037, -0.031735, -0.029972, -0.026726, -0.019633, -0.024718, -0.023903, -0.024284, -0.022307, -0.021308, -0.019306, -0.019355, -0.021413, -0.020879, -0.021100, -0.022637, -0.024936, -0.027445, -0.028772, -0.033028, -0.036732, -0.038605, -0.039927, -0.041897
#*# 	  -0.051230, -0.047057, -0.043249, -0.043657, -0.040943, -0.035971, -0.034945, -0.034907, -0.030759, -0.028712, -0.028967, -0.028190, -0.027973, -0.026064, -0.026442, -0.027124, -0.024416, -0.024599, -0.026707, -0.027275, -0.024074, -0.028321, -0.031288, -0.032053, -0.038568, -0.038025, -0.042851, -0.043259, -0.046717, -0.047115
#*# 	  -0.050203, -0.050123, -0.049292, -0.048929, -0.052172, -0.041475, -0.038482, -0.038091, -0.033644, -0.031429, -0.030698, -0.029142, -0.029084, -0.031037, -0.030218, -0.030613, -0.028872, -0.028109, -0.031812, -0.030785, -0.032224, -0.033988, -0.033250, -0.036021, -0.042139, -0.042941, -0.047527, -0.048437, -0.049840, -0.051654
#*# 	  -0.060542, -0.055712, -0.053232, -0.054000, -0.050935, -0.049523, -0.048037, -0.043714, -0.039189, -0.038563, -0.034038, -0.034972, -0.037271, -0.037690, -0.037356, -0.036475, -0.034903, -0.036465, -0.037916, -0.038107, -0.039142, -0.041450, -0.042214, -0.043957, -0.049150, -0.051436, -0.058994, -0.056109, -0.056839, -0.060578
#*# 	  -0.064901, -0.060131, -0.063484, -0.058351, -0.055543, -0.051926, -0.049065, -0.049359, -0.045165, -0.040931, -0.037735, -0.037958, -0.039464, -0.041708, -0.041398, -0.041534, -0.040272, -0.041941, -0.043923, -0.045027, -0.045221, -0.048021, -0.050684, -0.050403, -0.054214, -0.058037, -0.062569, -0.062886, -0.064100, -0.065784
#*# 	  -0.070786, -0.066889, -0.063627, -0.062829, -0.061012, -0.059098, -0.055678, -0.052971, -0.048572, -0.046786, -0.044024, -0.045402, -0.045485, -0.046706, -0.048428, -0.049100, -0.049131, -0.047332, -0.050167, -0.050983, -0.051478, -0.054200, -0.054864, -0.055323, -0.056632, -0.060738, -0.064611, -0.065304, -0.069190, -0.067279
#*# 	  -0.075075, -0.071253, -0.069704, -0.069438, -0.067031, -0.063147, -0.061020, -0.058802, -0.054219, -0.051690, -0.048540, -0.049378, -0.050748, -0.050038, -0.051424, -0.053034, -0.052200, -0.053237, -0.053874, -0.054988, -0.057729, -0.059047, -0.059650, -0.060565, -0.063688, -0.066035, -0.068696, -0.068039, -0.070150, -0.069642
#*# 	  -0.079124, -0.074286, -0.074158, -0.071267, -0.070383, -0.067514, -0.066104, -0.063714, -0.058690, -0.055799, -0.055480, -0.052773, -0.055073, -0.054463, -0.056190, -0.057071, -0.057202, -0.057681, -0.059418, -0.057694, -0.060885, -0.063621, -0.064613, -0.065094, -0.066868, -0.069649, -0.071361, -0.070764, -0.071720, -0.070412
#*# 	  -0.080452, -0.078820, -0.077625, -0.076214, -0.073108, -0.064489, -0.066472, -0.065946, -0.062257, -0.060169, -0.058988, -0.059103, -0.059696, -0.059821, -0.060301, -0.061057, -0.062685, -0.062194, -0.065171, -0.063852, -0.065483, -0.067885, -0.070257, -0.071189, -0.071702, -0.071289, -0.074524, -0.073336, -0.072227, -0.073961
#*# 	  -0.082074, -0.079288, -0.077697, -0.077864, -0.076771, -0.070543, -0.071418, -0.069334, -0.065037, -0.065108, -0.062883, -0.062323, -0.063879, -0.065658, -0.064328, -0.066388, -0.065277, -0.066631, -0.068088, -0.069159, -0.069887, -0.072384, -0.073223, -0.074686, -0.076035, -0.078327, -0.077697, -0.074616, -0.076035, -0.072881
#*# 	  -0.078890, -0.077914, -0.078220, -0.075955, -0.076461, -0.071904, -0.069224, -0.069032, -0.066621, -0.066546, -0.065281, -0.065257, -0.065285, -0.066944, -0.068073, -0.070377, -0.070857, -0.072351, -0.073376, -0.074008, -0.076653, -0.079829, -0.078839, -0.078920, -0.081984, -0.083608, -0.083584, -0.081586, -0.079500, -0.077182
#*# 	  -0.074786, -0.078550, -0.079835, -0.079975, -0.075282, -0.072725, -0.071213, -0.069630, -0.067554, -0.064886, -0.063548, -0.065433, -0.066022, -0.067707, -0.070118, -0.074664, -0.074466, -0.075662, -0.078146, -0.079711, -0.082780, -0.084686, -0.083745, -0.083831, -0.084221, -0.085987, -0.088392, -0.085558, -0.082365, -0.077866
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 310.0
#*# min_y = 40.0
#*# max_y = 310.0
#*#
#*# [scanner]
#*# scanner_touch_threshold = 1000
#*# scanner_touch_z_offset = 0.090
#*# mode = touch
#*# scanner_touch_speed = 3
