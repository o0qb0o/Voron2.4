[include shell_command.cfg]
[virtual_sdcard]
path: ~/printer_data/gcodes
[display_status]
[pause_resume]

[mcu]
serial:/dev/serial/by-id/usb-Klipper_stm32f446xx_61003F001451303530323539-if00

[printer]                           
kinematics: corexy                  
max_velocity: 700                   
max_accel: 15000			            
max_z_velocity: 20		     	    
max_z_accel: 500                     
square_corner_velocity: 10

[idle_timeout]
timeout: 1800
####################################################################################
#                   Voron 2.4 R2 350mm
####################################################################################

[exclude_object]
[gcode_arcs]
resolution: 0.1
[include macros.cfg]
[include LED.cfg]
[include SHT36_PRO.cfg]
[include test_speed.cfg]
[include mainsail.cfg]
[include Hotkey.cfg]
[include Cartographer.cfg]
####################################################################################
#                 [X/Y Stepper Settings]
####################################################################################
#   B --------- --- A
#   |              |
#   |------E-------|
#   |              |
#   |              |
#   |              |
####################################################################################
#                   X (B Motor)
####################################################################################
[stepper_x]                         
step_pin: PE11                      
dir_pin: PE10                       
enable_pin: !PE9                    
rotation_distance: 40                
microsteps: 32                      
full_steps_per_rotation:200          
position_min: 0                     
position_endstop: 350              
position_max: 350                    
homing_speed: 150                   
homing_retract_dist: 2              
homing_positive_dir: true           
#----------------------------------------------------------------------------------
[tmc2209 stepper_x]                 
uart_pin: PE7 
interpolate: true                   
run_current: 0.9                                      
sense_resistor: 0.110                
stealthchop_threshold:  0 
[autotune_tmc stepper_x]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Y (A Motor)
####################################################################################
[stepper_y]                         
step_pin: PD8                       
dir_pin: PB12                       
enable_pin: !PD9                    
rotation_distance: 40               
microsteps: 32                       
full_steps_per_rotation:200        
endstop_pin: ^PB13 
position_min: 0                     
position_endstop: 350              
position_max: 350                   
homing_speed: 150                   
homing_retract_dist: 2               
homing_positive_dir: true           
#-----------------------------------------------------------------------------------
[tmc2209 stepper_y]                 
uart_pin: PE15 
interpolate: true                
run_current: 0.9                                       
sense_resistor: 0.110                
stealthchop_threshold: 0           
[autotune_tmc stepper_y]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                      Z Stepper Settings
####################################################################################
# ----------------
# |Z1          Z2|
# |  ---------   |
# |  |       |   |
# |  |       |   |
# |  x--------   |
# |Z           Z3|
# ----------------
#
####################################################################################
#                   Z
#################################################################################### 
[stepper_z]                         
step_pin: PD14                      
dir_pin: PD13                       
enable_pin: !PD15                   
rotation_distance: 40               
gear_ratio: 80:16                   
microsteps: 32 
#----------------------------------------------------------------------------------
endstop_pin: probe:z_virtual_endstop   # use idm as virtual endstop        
position_max: 310                   
position_min: -10                    
homing_speed: 10                     
#second_homing_speed: 3              
homing_retract_dist: 0 # idm needs this to be set to 0               
#----------------------------------------------------------------------------------
[tmc2209 stepper_z]                 
uart_pin: PD10                      
interpolate: true                
run_current: 0.8                                      
sense_resistor: 0.110                
stealthchop_threshold: 0 
[autotune_tmc stepper_z]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Z1
####################################################################################  
[stepper_z1]                        
step_pin: PE6                       
dir_pin: !PC13                       
enable_pin: !PE5                    
rotation_distance: 40               
gear_ratio: 80:16                   
microsteps: 32                     
#-----------------------------------------------------------------------------------
[tmc2209 stepper_z1]                
uart_pin: PC14                       
interpolate: true               
run_current: 0.8                                       
sense_resistor: 0.110                
stealthchop_threshold: 0
[autotune_tmc stepper_z1]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Z2
#################################################################################### 
[stepper_z2]                       
step_pin: PE2                        
dir_pin: PE4                        
enable_pin: !PE3                    
rotation_distance: 40                
gear_ratio: 80:16                    
microsteps: 32                       
#----------------------------------------------------------------------------------
[tmc2209 stepper_z2]                
uart_pin: PC15                      
interpolate: true                  
run_current: 0.8                                        
sense_resistor: 0.110                
stealthchop_threshold: 0
[autotune_tmc stepper_z2]
motor: omc-17hm19-2004s
tuning_goal: performance
####################################################################################
#                   Z3
#################################################################################### 
[stepper_z3]                       
step_pin: PD12                       
dir_pin: !PC4                        
enable_pin: !PE8                     
rotation_distance: 40                
gear_ratio: 80:16                    
microsteps: 32                       
#-----------------------------------------------------------------------------------
[tmc2209 stepper_z3]                
uart_pin: PA15                      
interpolate: true                 
run_current: 0.8                                      
sense_resistor: 0.110                
stealthchop_threshold: 0  
[autotune_tmc stepper_z3]
motor: omc-17hm19-2004s
tuning_goal: performance

####################################################################################
#                   Bed Heater
####################################################################################
[heater_bed]
heater_pin: PB4                     
sensor_type: Generic 3950           
sensor_pin: PB0                      
max_power: 0.6                     
min_temp: 0                       
max_temp: 120                      
#control: pid                       
#pid_kp: 58.437                     
#pid_ki: 2.347                      
#pid_kd: 363.769                    

####################################################################################
#	             Fan Control
####################################################################################
[heater_fan Controller_fan]         
pin: PC8                             
fan_speed: 0.35                      
kick_start_time: 0.5                
heater: extruder           
heater_temp: 40 
#--------------------------------------------------------------------------------
[heater_fan Nevermore_filter]
pin: PB3                            
max_power: 1.0                       
shutdown_speed: 0.0                 
kick_start_time: 5.0                
heater: heater_bed                  
heater_temp: 60                     
fan_speed: 1.0                      

####################################################################################
#	                LED Control
####################################################################################
[output_pin caselight]              
pin:PB6
pwm: true
shutdown_value: 0
cycle_time: 0.01
value: 1   

####################################################################################
#            Pi MCU  Board Spider v2.3
####################################################################################
[temperature_sensor Spider]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 90
#-----------------------------------------------------------------------------------
[temperature_sensor Raspberry]
sensor_type: temperature_host
sensor_path:/sys/class/thermal/thermal_zone0/temp
min_temp: 0
max_temp: 90


[gcode_macro SHUTDOWN]
gcode:
    #LCDRGB R=0 G=0 B=0                               ; Turn off LCD neopixels (see above for this macro)
    OFF                                              ; Shortcut to turn everything off (see above for this macro)
	{action_call_remote_method("shutdown_machine")}   ; Moonraker compatible host shutdown



    


   
## 	Thermistor Types
##   "EPCOS 100K B57560G104F"
##   "ATC Semitec 104GT-2"
##   "NTC 100K beta 3950"
##   "Honeywell 100K 135-104LAG-J01"
##   "NTC 100K MGB18-104F39050L32" (Keenovo Heater Pad)
##   "AD595"
##   "PT100 INA826"

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 32.887
#*# pid_ki = 1.059
#*# pid_kd = 255.287
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.614
#*# pid_ki = 2.339
#*# pid_kd = 70.121
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 75.6
#*# shaper_type_y = mzv
#*# shaper_freq_y = 44.2
#*#
#*# [scanner model default]
#*# model_coef = 1.5072647820861802,
#*# 	1.9469590406528463,
#*# 	0.762811841829712,
#*# 	0.33183711036569596,
#*# 	0.28667495203041643,
#*# 	0.24266348404336052,
#*# 	-0.17363521923751818,
#*# 	-0.20367470262932422,
#*# 	0.16727882521523316,
#*# 	0.13472126957028804
#*# model_domain = 3.222026314287627e-07,3.301071612586958e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 51.137861
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.0.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.004388, -0.014338, -0.009955, -0.007266, -0.007367, -0.011042, -0.005540, -0.001955, 0.001169, 0.010675, 0.008168, 0.013891, 0.011334, 0.016490, 0.013721, 0.017858, 0.012509, 0.024939, 0.031507, 0.034074, 0.037872, 0.032777, 0.031913, 0.031804, 0.029804, 0.024953, 0.017287, 0.010772, 0.005635, 0.006847
#*# 	  -0.005827, 0.001058, -0.006173, 0.002404, -0.004259, 0.005356, -0.003172, 0.005706, 0.007422, 0.011641, 0.015084, 0.015430, 0.019327, 0.024620, 0.028378, 0.026842, 0.034235, 0.031357, 0.037997, 0.040746, 0.041945, 0.037819, 0.039175, 0.036936, 0.032274, 0.034417, 0.022959, 0.019845, 0.013782, 0.013751
#*# 	  -0.002503, 0.004198, -0.004470, 0.005641, 0.003221, 0.006253, 0.006767, 0.008476, 0.012580, 0.013372, 0.021891, 0.015696, 0.027567, 0.021264, 0.033358, 0.034232, 0.035198, 0.043985, 0.041615, 0.044931, 0.043296, 0.046288, 0.035445, 0.039741, 0.031370, 0.033888, 0.025090, 0.021162, 0.016612, 0.015750
#*# 	  -0.004523, -0.002039, 0.004526, 0.002116, 0.005356, 0.007052, 0.012616, 0.006630, 0.017431, 0.013708, 0.018015, 0.016241, 0.023676, 0.026347, 0.028260, 0.036409, 0.036470, 0.040971, 0.042487, 0.044603, 0.038754, 0.041288, 0.034545, 0.037861, 0.032546, 0.031964, 0.025223, 0.022524, 0.018992, 0.013955
#*# 	  -0.006141, -0.003794, -0.005060, -0.000605, -0.001398, 0.009608, 0.004977, 0.014795, 0.007594, 0.022915, 0.015233, 0.023129, 0.022945, 0.027373, 0.028394, 0.033065, 0.037535, 0.032220, 0.042157, 0.038146, 0.043418, 0.034904, 0.040517, 0.029305, 0.033468, 0.033606, 0.024196, 0.020191, 0.016609, 0.013449
#*# 	  -0.005671, -0.004067, -0.004369, 0.000430, -0.000118, 0.010719, 0.006429, 0.002354, 0.013054, 0.018270, 0.018372, 0.017221, 0.024644, 0.020325, 0.031543, 0.031552, 0.035364, 0.037128, 0.039202, 0.038548, 0.037743, 0.036568, 0.030066, 0.037614, 0.029045, 0.030117, 0.018868, 0.017982, 0.012964, 0.012982
#*# 	  -0.005243, 0.001359, 0.001902, 0.003572, 0.004496, 0.009147, 0.009116, 0.011935, 0.016567, 0.020159, 0.021326, 0.023898, 0.023397, 0.027552, 0.031715, 0.032758, 0.036450, 0.039577, 0.038823, 0.040056, 0.041107, 0.036457, 0.036250, 0.036231, 0.031219, 0.029785, 0.025455, 0.021359, 0.015558, 0.013385
#*# 	  -0.006845, -0.002751, -0.000147, 0.001614, 0.007855, 0.009207, 0.013486, 0.011903, 0.014461, 0.014898, 0.019865, 0.021297, 0.023100, 0.027374, 0.029627, 0.031837, 0.034557, 0.034588, 0.035538, 0.038056, 0.037841, 0.035201, 0.035488, 0.031522, 0.028135, 0.027610, 0.021128, 0.017434, 0.015773, 0.010988
#*# 	  -0.011022, -0.007881, -0.002615, -0.003784, 0.000487, 0.004184, 0.005884, 0.006623, 0.009801, 0.013971, 0.013892, 0.014244, 0.017268, 0.018379, 0.021595, 0.021486, 0.025930, 0.028166, 0.033586, 0.028599, 0.032972, 0.028590, 0.025689, 0.024323, 0.022535, 0.018297, 0.011826, 0.013087, 0.007840, 0.001774
#*# 	  -0.016080, -0.010254, -0.008043, -0.005629, -0.003806, -0.001047, 0.001354, 0.001803, 0.000963, 0.007297, 0.008750, 0.006395, 0.011918, 0.013797, 0.013975, 0.017498, 0.021477, 0.021258, 0.022382, 0.022178, 0.021402, 0.021397, 0.020002, 0.017230, 0.013771, 0.013640, 0.006696, 0.010708, 0.001141, -0.002890
#*# 	  -0.014779, -0.011876, -0.008511, -0.011217, -0.005289, -0.005667, 0.001460, 0.002149, 0.005959, 0.007504, 0.010081, 0.005996, 0.008907, 0.013190, 0.013225, 0.016244, 0.018238, 0.019792, 0.020056, 0.021539, 0.020540, 0.019077, 0.017857, 0.014046, 0.011632, 0.011335, 0.003148, 0.001197, -0.001310, -0.006494
#*# 	  -0.019727, -0.017192, -0.009923, -0.011767, -0.009640, -0.004475, -0.002129, -0.002743, 0.001319, 0.004756, 0.005975, 0.005315, 0.006356, 0.007653, 0.009757, 0.010177, 0.013692, 0.017195, 0.015852, 0.016988, 0.018112, 0.014428, 0.008862, 0.009927, 0.006560, 0.001874, 0.002703, -0.001239, -0.006344, -0.008992
#*# 	  -0.024067, -0.018680, -0.016540, -0.017047, -0.013042, -0.008441, -0.007653, -0.003938, -0.000014, 0.002231, 0.001073, 0.002508, 0.001545, 0.003551, 0.006051, 0.005466, 0.008131, 0.011187, 0.010942, 0.011005, 0.009570, 0.004285, 0.007711, 0.004143, -0.001285, -0.001349, -0.005183, -0.007331, -0.010864, -0.013660
#*# 	  -0.030012, -0.025074, -0.021710, -0.023316, -0.017479, -0.012759, -0.010245, -0.009854, -0.007021, -0.005325, -0.002048, -0.004784, -0.004214, -0.002274, -0.003383, 0.001406, 0.001246, 0.003153, 0.003193, 0.006288, 0.003370, 0.002367, -0.000204, -0.003517, -0.007144, -0.008378, -0.011715, -0.015949, -0.014204, -0.018863
#*# 	  -0.026384, -0.024044, -0.021269, -0.022658, -0.019612, -0.009949, -0.012427, -0.007768, -0.006747, -0.003719, -0.005404, -0.003911, -0.006221, -0.003749, -0.002981, -0.000907, 0.000566, -0.000426, 0.002447, -0.002857, -0.001691, -0.003016, -0.005720, -0.007090, -0.008424, -0.011791, -0.015892, -0.009788, -0.018085, -0.020143
#*# 	  -0.031139, -0.027786, -0.024999, -0.024968, -0.022244, -0.019120, -0.015081, -0.014712, -0.010617, -0.008136, -0.007015, -0.008811, -0.006006, -0.006487, -0.006075, -0.002146, -0.002644, -0.002864, -0.003851, -0.004494, -0.005615, -0.005221, -0.006535, -0.009633, -0.011413, -0.015167, -0.019943, -0.016493, -0.017349, -0.020340
#*# 	  -0.031983, -0.027971, -0.026003, -0.026298, -0.025764, -0.021326, -0.017776, -0.015812, -0.014191, -0.008277, -0.007430, -0.010595, -0.008455, -0.009085, -0.008167, -0.005914, -0.003850, -0.007061, -0.006887, -0.006506, -0.007672, -0.008960, -0.008826, -0.011116, -0.015357, -0.016766, -0.023691, -0.021258, -0.022582, -0.027555
#*# 	  -0.032622, -0.028325, -0.027538, -0.028787, -0.025215, -0.020120, -0.018206, -0.017861, -0.015792, -0.012601, -0.011351, -0.011167, -0.009104, -0.012169, -0.009970, -0.009038, -0.007529, -0.008186, -0.009499, -0.009838, -0.009948, -0.011251, -0.014077, -0.013151, -0.018973, -0.019896, -0.025877, -0.024274, -0.027170, -0.029258
#*# 	  -0.034355, -0.027714, -0.027987, -0.029811, -0.026136, -0.020607, -0.019316, -0.020502, -0.019605, -0.014056, -0.014389, -0.014049, -0.013979, -0.013768, -0.012347, -0.011795, -0.008449, -0.009444, -0.012202, -0.012578, -0.010752, -0.016143, -0.015873, -0.018834, -0.022109, -0.024628, -0.028171, -0.029889, -0.031639, -0.033549
#*# 	  -0.032404, -0.028677, -0.026987, -0.027431, -0.024262, -0.021281, -0.020089, -0.020233, -0.015695, -0.013760, -0.011715, -0.014766, -0.012338, -0.012111, -0.013675, -0.011927, -0.009922, -0.011101, -0.013993, -0.013358, -0.013282, -0.017512, -0.019030, -0.019385, -0.025173, -0.024700, -0.030342, -0.032920, -0.033698, -0.037790
#*# 	  -0.034235, -0.031016, -0.028317, -0.028462, -0.026122, -0.023272, -0.019596, -0.018956, -0.014562, -0.012716, -0.012868, -0.013633, -0.011930, -0.013881, -0.015120, -0.014248, -0.012050, -0.012608, -0.013375, -0.017693, -0.016961, -0.018954, -0.020718, -0.021057, -0.023319, -0.029478, -0.034449, -0.033525, -0.036906, -0.037633
#*# 	  -0.035342, -0.030023, -0.028986, -0.029558, -0.026635, -0.024256, -0.021049, -0.020135, -0.018994, -0.014119, -0.012026, -0.012497, -0.014013, -0.016306, -0.016608, -0.014066, -0.014418, -0.016500, -0.017013, -0.019682, -0.020749, -0.019502, -0.023871, -0.024221, -0.030302, -0.034365, -0.041553, -0.038860, -0.039286, -0.043774
#*# 	  -0.036308, -0.031132, -0.030391, -0.033099, -0.029464, -0.027652, -0.022818, -0.021933, -0.018942, -0.014586, -0.012309, -0.013687, -0.015352, -0.015957, -0.019403, -0.019055, -0.016656, -0.017666, -0.019955, -0.021074, -0.022618, -0.027162, -0.026262, -0.029409, -0.033628, -0.035533, -0.041671, -0.040957, -0.041753, -0.045260
#*# 	  -0.038689, -0.032401, -0.030204, -0.030654, -0.029875, -0.025276, -0.022825, -0.022960, -0.019325, -0.015573, -0.014756, -0.013112, -0.016374, -0.015345, -0.019087, -0.020061, -0.022008, -0.019642, -0.023558, -0.024591, -0.024680, -0.026797, -0.028685, -0.029248, -0.032367, -0.035556, -0.038696, -0.039545, -0.041207, -0.042387
#*# 	  -0.035698, -0.033078, -0.031202, -0.032281, -0.029247, -0.026397, -0.024923, -0.022987, -0.019348, -0.015337, -0.014202, -0.013710, -0.015251, -0.015930, -0.018029, -0.019078, -0.018652, -0.020192, -0.020708, -0.021352, -0.023182, -0.027442, -0.026777, -0.026636, -0.031954, -0.035669, -0.039118, -0.038962, -0.038288, -0.038765
#*# 	  -0.033447, -0.031761, -0.029921, -0.027820, -0.027736, -0.025329, -0.024922, -0.021486, -0.017216, -0.014691, -0.012461, -0.012538, -0.013859, -0.015199, -0.015196, -0.018075, -0.016505, -0.017987, -0.019350, -0.022359, -0.022443, -0.026019, -0.027471, -0.027799, -0.031322, -0.030187, -0.035165, -0.035620, -0.035242, -0.037493
#*# 	  -0.030548, -0.028071, -0.028231, -0.028748, -0.025425, -0.022729, -0.019316, -0.018685, -0.013644, -0.012595, -0.011052, -0.011872, -0.012590, -0.013977, -0.015229, -0.016045, -0.016830, -0.017756, -0.020770, -0.021020, -0.022467, -0.024923, -0.026531, -0.027718, -0.030097, -0.031452, -0.034991, -0.032686, -0.033221, -0.033149
#*# 	  -0.024550, -0.021118, -0.020969, -0.022097, -0.019359, -0.017147, -0.014768, -0.014716, -0.012271, -0.009214, -0.008073, -0.008179, -0.008949, -0.011008, -0.012008, -0.012117, -0.014287, -0.015194, -0.016396, -0.017275, -0.020008, -0.022095, -0.024210, -0.024923, -0.027025, -0.029194, -0.030598, -0.028940, -0.027804, -0.028413
#*# 	  -0.014271, -0.013634, -0.014232, -0.013815, -0.012463, -0.010438, -0.006347, -0.005687, -0.003175, -0.003213, -0.004341, -0.004131, -0.003962, -0.005801, -0.008378, -0.009224, -0.008890, -0.011655, -0.013402, -0.014797, -0.018768, -0.019622, -0.021184, -0.022539, -0.025296, -0.025917, -0.029790, -0.024872, -0.024499, -0.021855
#*# 	  -0.002163, -0.003107, -0.006560, -0.007508, -0.003194, -0.000060, -0.000077, 0.003024, 0.003304, 0.005101, 0.005172, 0.003107, 0.002586, 0.001013, -0.002464, -0.003521, -0.005626, -0.005655, -0.010501, -0.013047, -0.015775, -0.019870, -0.018320, -0.018045, -0.020891, -0.023134, -0.024688, -0.020870, -0.018231, -0.016204
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 310.0
#*# min_y = 40.0
#*# max_y = 310.0
#*#
#*# [scanner]
#*# scanner_touch_threshold = 1000
#*# scanner_touch_z_offset = 0.090
#*# mode = touch
#*# scanner_touch_speed = 3
